@model IEnumerable<Plaboo.Models.RecyclingCentre>




<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <style>
        .navbar {
            background-color: white !important;
        }

        .hero-image {
            background-image: url('../../Content/Images/recyclingpapers.jpg');
            height: 50%;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            position: relative;
            width: 100%;
        }

        /*below are the css for the modal dialog box which is being shown when the user does not enter a valid postcode*/
        .modal.fade .modal-dialog {
            opacity: 0;
            -webkit-transition: all 0.5s ease-in-out;
            transition: all 0.5s;
            transform: scale(0) rotate(500deg);
        }

        .modal.fade.in .modal-dialog {
            opacity: 1;
            transform: scale(1) rotate(0deg);
        }

        .modal-backdrop {
            background-color: gray;
        }

        .modal-header {
            background-color: azure;
            color: white;
        }

        .modal-body {
            background-color: azure;
            color: white;
        }

        .modal-footer {
            background-color: azure;
            color: white;
        }

        .mcontent {
            color: black;
            font-family: Calibri;
        }

        /*media query to introduce responsiveness in the mobile phones*/
        @@media only screen and (min-device-width: 320px) and (max-device-width: 568px) and (-webkit-min-device-pixel-ratio: 2) {
        }



        #maprow {
            margin-left: 15px;
            margin-right: 15px;
            margin-top: 15px
        }

        .card {
            margin-left: 15px;
            margin-right: 15px;
            margin-top: 20px;
            padding-bottom:20px;
        }

         .card:hover {
            -webkit-box-shadow: -1px 9px 40px -12px rgba(0,0,0,0.75);
            -moz-box-shadow: -1px 9px 40px -12px rgba(0,0,0,0.75);
            box-shadow: -1px 9px 40px -12px rgba(0, 0, 0, 0.75);
        }

         

        @@media only screen and (min-width: 600px) and (max-width: 1200px) {
            /* For tablets: */
            .pad {
                margin-left: 7%
            }
        }

        /*this css is to show the progress bar at the top of the screen*/
        .header {
            position: fixed;
            top: 0;
            z-index: 1;
            width: 100%;
            background-color: #f1f1f1;
        }

        .progress-container {
            width: 100%;
            height: 8px;
            background: #ccc;
        }

        .progress-bar {
            height: 8px;
            background: #4caf50;
            width: 0%;
        }



        h1 {
          font-size: 37px;
      }

      @@media only screen and (min-device-width: 320px) and (max-device-width: 568px) and (-webkit-min-device-pixel-ratio: 2) {
          h1 {
              font-size: calc(16px + 6 * ((100vw - 320px) / 680));
          }
          h2 {
              font-size: calc(16px + 6 * ((100vw - 320px) / 680));
          }
      }

       p {
          font-size: 23px;
      }

      @@media only screen and (min-device-width: 320px) and (max-device-width: 568px) and (-webkit-min-device-pixel-ratio: 2) {
          p {
              font-size: calc(16px + 6 * ((100vw - 320px) / 680));
          }
      }

    .img-responsive {
        width: 100%;
        height: auto;
        /*border-radius: 15%;*/
        overflow: hidden;
        transition: all 1.5s ease;
    }

  .img-responsive:hover {
        transform: scale(1.1);
    }

      .inner {
          overflow: hidden;
      }

        /*below is the css to implement the timeline*/

        .timeline {
            list-style: none;
            padding: 20px 0 20px;
            position: relative;
        }

          .timeline:before {
              top: 0;
              bottom: 0;
              position: absolute;
              content: " ";
              width: 3px;
              background-color: #eeeeee;
              left: 50%;
              margin-left: -1.5px;
          }

          .timeline > li {
              margin-bottom: 20px;
              position: relative;
              width: 50%;
              float: left;
              clear: left;
          }

              .timeline > li:before,
              .timeline > li:after {
                  content: " ";
                  display: table;
              }

              .timeline > li:after {
                  clear: both;
              }

              .timeline > li:before,
              .timeline > li:after {
                  content: " ";
                  display: table;
              }

              .timeline > li:after {
                  clear: both;
              }

              .timeline > li > .timeline-panel {
                  width: 95%;
                  float: left;
                  border: 1px solid #d4d4d4;
                  /*border-radius: 2px;*/
                  /*padding: 20px;*/
                  position: relative;
                  -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
                  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
              }

                  .timeline > li > .timeline-panel:before {
                      position: absolute;
                      top: 26px;
                      right: -15px;
                      display: inline-block;
                      border-top: 15px solid transparent;
                      border-left: 15px solid #ccc;
                      border-right: 0 solid #ccc;
                      border-bottom: 15px solid transparent;
                      content: " ";
                  }

                  .timeline > li > .timeline-panel:after {
                      position: absolute;
                      top: 27px;
                      right: -14px;
                      display: inline-block;
                      border-top: 14px solid transparent;
                      border-left: 14px solid #fff;
                      border-right: 0 solid #fff;
                      border-bottom: 14px solid transparent;
                      content: " ";
                  }

              .timeline > li > .timeline-badge {
                  color: #fff;
                  width: 24px;
                  height: 24px;
                  line-height: 50px;
                  font-size: 1.4em;
                  text-align: center;
                  position: absolute;
                  top: 16px;
                  right: -12px;
                  /*background-color: #999999;*/
                  z-index: 100;
                  /*
    border-top-right-radius: 50%;
    border-top-left-radius: 50%;
    border-bottom-right-radius: 50%;
    border-bottom-left-radius: 50%;
    */
              }

              .timeline > li.timeline-inverted > .timeline-panel {
                  float: right;
              }

                  .timeline > li.timeline-inverted > .timeline-panel:before {
                      border-left-width: 0;
                      border-right-width: 15px;
                      left: -15px;
                      right: auto;
                  }

                  .timeline > li.timeline-inverted > .timeline-panel:after {
                      border-left-width: 0;
                      border-right-width: 14px;
                      left: -14px;
                      right: auto;
                  }

      .timeline-badge > a {
          color: #C5C7C5 !important;
      }

      .timeline-badge a:hover {
          color: #000 !important;
      }

      .timeline-title {
          margin-top: 0;
          color: inherit;
      }

      .timeline-body > p,
      .timeline-body > ul {
          padding: 20px;
          margin-bottom: 0;
      }

          .timeline-body > p + p {
              margin-top: 5px;
          }

      .timeline-footer {
          padding: 20px;
          background-color: #f4f4f4;
      }

          .timeline-footer > a {
              cursor: pointer;
              text-decoration: none;
          }

      .tooltip {
          position: absolute;
          z-index: 1020;
          display: block;
          visibility: visible;
          padding: 5px;
          font-size: 11px;
          opacity: 0;
          filter: alpha(opacity=0);
      }

          .tooltip.in {
              /*opacity:0;
      filter:alpha(opacity=80);*/
          }

          .tooltip.top {
              margin-top: -2px;
          }

          .tooltip.right {
              margin-left: 2px;
          }

          .tooltip.bottom {
              margin-top: 2px;
          }

          .tooltip.left {
              margin-left: -2px;
          }

          .tooltip.top .tooltip-arrow {
              bottom: 0;
              left: 0;
              margin-left: 0;
              border-left: 0 solid transparent;
              border-right: 5px solid transparent;
              border-top: 0 solid #000;
          }

          .tooltip.left .tooltip-arrow {
              bottom: 0;
              left: 0;
              margin-left: 0;
              border-left: 0 solid transparent;
              border-right: 5px solid transparent;
              border-top: 0 solid #000;
          }

          .tooltip.bottom .tooltip-arrow {
              bottom: 0;
              left: 0;
              margin-left: 0;
              border-left: 0 solid transparent;
              border-right: 5px solid transparent;
              border-top: 0 solid #000;
          }

          .tooltip.right .tooltip-arrow {
              bottom: 0;
              left: 0;
              margin-left: 0;
              border-left: 0 solid transparent;
              border-right: 5px solid transparent;
              border-top: 0 solid #000;
          }

      .tooltip-inner {
          width: 200px;
          padding: 3px 8px;
          color: #fff;
          text-align: center;
          text-decoration: none;
          background-color: #313131;
          -webkit-border-radius: 0px;
          -moz-border-radius: 0px;
          border-radius: 0px;
      }

      .tooltip-arrow {
          position: absolute;
          width: 0;
          height: 0;
      }

      .timeline > li.timeline-inverted {
          float: right;
          clear: right;
          margin-top: 30px;
          margin-bottom: 30px;
      }

      .timeline > li:nth-child(2) {
          margin-top: 60px;
      }

      .timeline > li:nth-child(3) {
          margin-top: 70px;
      }

      .timeline > li.timeline-inverted > .timeline-badge {
          left: -12px;
      }

      @@media (max-width: 767px) {
          ul.timeline:before {
              left: 40px;
          }

        ul.timeline > li {
            margin-bottom: 20px;
            position: relative;
            width: 100%;
            float: left;
            clear: left;
        }

              ul.timeline > li > .timeline-panel {
                  width: calc(100% - 90px);
                  width: -moz-calc(100% - 90px);
                  width: -webkit-calc(100% - 90px);
              }

              ul.timeline > li > .timeline-badge {
                  left: 28px;
                  margin-left: 0;
                  top: 16px;
              }

              ul.timeline > li > .timeline-panel {
                  float: right;
              }

                  ul.timeline > li > .timeline-panel:before {
                      border-left-width: 0;
                      border-right-width: 15px;
                      left: -15px;
                      right: auto;
                  }

                  ul.timeline > li > .timeline-panel:after {
                      border-left-width: 0;
                      border-right-width: 14px;
                      left: -14px;
                      right: auto;
                  }

          .timeline > li.timeline-inverted {
              float: left;
              clear: left;
              margin-top: 30px;
              margin-bottom: 30px;
          }

              .timeline > li.timeline-inverted > .timeline-badge {
                  left: 28px;
              }
      }

          html, body {
            
            background-color: ghostwhite;
           
        }

    </style>
</head>


<body>
    <div class="content">

        <div class="container" style="margin-top: 20px;">
            <div class="page-header text-center">
                <h1 id="timeline" style="font-family:'Calibri';color:indianred;text-align:center"><b>How Do I Improve The Recycling Rate?</b></h1>
            </div>
            <ul class="timeline">
                <li>
                    <div class="timeline-badge primary"><a><i class="glyphicon glyphicon-record" rel="tooltip" title="Know More" id=""></i></a></div>
                    <div class="timeline-panel">
                        <div class="timeline-heading">
                            <img class="img-responsive" src="~/Content/Images/2.jpeg" />

                        </div>
                        <div class="timeline-body">

                            <p style="font-family:Calibri;color:black;">
                                <b>Know More</b> <br />
                                The knowledge learned in school and on the internet can be effectively applied to daily life at home, and recyclable and non-recyclable garbage
                                cans can be set up at home. Since most adolescents don't think enough about what goes into the  recycling trash bin, they can't decide
                                what to recycle and what not to recycle.
                            </p>

                        </div>

                        <div class="timeline-footer">

                            <a style="font-size:22px;color:#0275d8;font-family:Calibri" target="_blank" href="https://www.recycling.vic.gov.au/can-i-recycle-this">
                                What Goes Where? <i class="fas fa-arrow-circle-right"></i>
                            </a>


                        </div>
                    </div>
                </li>

                <li class="timeline-inverted" style="margin-top: 100px;">
                    <div class="timeline-badge primary"><a><i class="glyphicon glyphicon-record invert" rel="tooltip" title="Do More" id=""></i></a></div>
                    <div class="timeline-panel">
                        <div class="timeline-heading">
                            <img class="img-responsive" src="~/Content/Images/3.jpeg" />

                        </div>
                        <div class="timeline-body">
                            <p style="font-family:Calibri;color:black;">
                                <b>Do More</b> <br />
                                Imagine teenagers at a concert or in a park. There are a lot of empty plastic bottles around, and picking them up and putting them
                                in the trash will eventually make them end up in landfills or the ocean. Teenagers can put them in a vending machine, watch them grind into
                                plastic particles, melt into plastic threads, and then 3d print them as phone cases.
                            </p>

                        </div>

                        <div class="timeline-footer">
                            <a style="font-size:22px;color:#0275d8;font-family:Calibri" target="_blank" href="https://engage.vic.gov.au/waste/wastetoenergy">
                                Let's Do It <i class="fas fa-arrow-circle-right"></i>
                            </a>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="timeline-badge primary"><a><i class="glyphicon glyphicon-record" rel="tooltip" title="Learn More" id=""></i></a></div>
                    <div class="timeline-panel">
                        <div class="timeline-heading">
                            <img class="img-responsive" src="~/Content/Images/1.jpeg" />

                        </div>
                        <div class="timeline-body">
                            <p style="font-family:Calibri;color:black;">
                                <b>Learn More</b> <br />
                                The adolescents are often the most powerful agents of change. Recycling should be encouraged regardless of age. Share valuable information
                                about acceptable recyclable materials with adolescents in schools and via social media; and provide answers to waste or recycling questions.
                            </p>

                        </div>

                        <div class="timeline-footer">
                            <a style="font-size:22px;color:#0275d8;font-family:Calibri" target="_blank" href="https://www.sustainability.vic.gov.au/School/Get-started">
                                Getting Involved <i class="fas fa-arrow-circle-right"></i>
                            </a>
                        </div>
                    </div>
                </li>



                <li class="clearfix" style="float: none;"></li>
            </ul>
        </div>


        @using (Html.BeginForm("Index", "RecyclingCentres", FormMethod.Post))
        {
            <div class="content">
                <div class="hero-image responsive" style="height: 460px;margin-bottom:30px;">
                    <div class="hero-text" style="        text-align: center;
        transform: translate(-50%, -40%);
        position: absolute;
        left: 50%;
        top: 25%;
">
                        <h2 style="color:indianred; font-family: Calibri">
                            Got Waste? Find Nearby Waste Management Centres.
                        </h2>
                        <p>Dispose any unwanted household plastic products at home, making sure these materials can be returned to create new products
                        while protecting our environment.</p>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="col-md-2"></div>
                                <div class="col-md-4">

                                    <input style="width: 220px;  height: 40px;" class="form-control" id="suburb"
                                           aria-describedby="emailHelp" name="suburb" placeholder="Enter Suburb">
                                </div>
                                <div class="col-md-2" style="margin-top:2px;">



                                    <input type="submit" value="Search" id="search" class="btn btn-primary" />
                                </div>
                                <div class="col-md-4"></div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        }



        @*@if (Model.Count() < 30)
        {*@
        <div class="card" style="background-color:azure;">
            <div id="maprow" class="row">
                <div class="text-center">
                    <h1 style="font-family:Calibri;color:indianred;"><b>Waste Management Centres</b></h1>
                </div>
            </div>
            <div id="maprow" class="row">
                <div class="col-md-8">
                    <div id="map" style="width: 100%; height: 400px;"></div>
                </div>

                <div class="col-md-4 pre-scrollable" style="height:400px">

                    @foreach (var result in Model)
                    {
                        <div id="maprow" class="row">
                            <p><b>@result.Name</b></p>
                            <p style="font-size:20px;">@result.DetailedAddress</p>
                            <p style="font-size:20px;"><i class="fas fa-phone-volume"></i>- @result.Contact</p>
                            <a class="btn btn-primary" href="https://www.google.com/maps/search/?api=1&query=@result.Address" target="_blank">
                                Get Directions
                                <i class="fas fa-directions"></i>
                            </a>

                            <hr />
                        </div>
                    }

                </div>

            </div>
        </div>




        <div class="row" style="margin-top:60px;">

            <div class="col-md-12">
                <div class="col-md-3"></div>
                <div class="col-md-6">

                    <div class='tableauPlaceholder' id='viz1600137970920' style='max-height:560px;max-width: 950px;text-align:center;'><noscript><a href='#'><img alt=' ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Gl&#47;GlobalRecyclingRate_v2_11&#47;1&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz' style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='site_root' value='' /><param name='name' value='GlobalRecyclingRate_v2_11&#47;1' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Gl&#47;GlobalRecyclingRate_v2_11&#47;1&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='language' value='en' /><param name='filter' value='publish=yes' /></object></div>
                    <script type='text/javascript'>var divElement = document.getElementById('viz1600137970920'); var vizElement = divElement.getElementsByTagName('object')[0]; vizElement.style.width = '100%'; vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px'; var scriptElement = document.createElement('script'); scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js'; vizElement.parentNode.insertBefore(scriptElement, vizElement);</script>
                </div>
                <div class="col-md-3"></div>
            </div>
            <div class="col-md-4"></div>

            <div class="col-md-12" style="margin-top:40px;">
                <div class="col-md-3"></div>
                <div class="col-md-6">
                    <p style="font-family:'Calibri';font-size:23px;">
                        This map will give you a glimpse of how other countries are performing in terms of recycling waste. The recycling rate of Australia
                        is around 42.1% which is above average compared to other countries. The remaining 57.9% products that are not recycled, are either discarded into
                        the ocean or it is dumped into landfills.
                    </p>
                </div>
                <div class="col-md-3"></div>
            </div>
            <div class="col-md-12">
                <div class="col-md-3"></div>
                <div class="col-md-6" style="text-align:center">
                    <button type="button" class="btn btn-primary flip" style="margin-left: 0px; margin-top: 0px;width:170px;"
                            onclick="location.href='@Url.Action("Index", "Home")'">
                        <i class="fas fa-globe-asia"></i> Home
                    </button>
                </div>
                <div class="col-md-3"></div>
            </div>
        </div>
    </div>





    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" id="resizemodal" role="document">
            <div class="modal-content">
                <div class="modal-header">

                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="mcontent" id="popupcontent">Oops, there is no waste management centre in your suburb!</p>
                </div>
            </div>
        </div>
    </div>
  
</body>



<script>

    var availableTags = [];

    var model = @Html.Raw(Json.Encode(Model));
          
    var array = @Html.Raw(Json.Encode(@ViewBag.availabletags));
    for (var i = 0; i < array.length; i++) {
       
        availableTags.push(array[i]);
        }

    $("#suburb").autocomplete({
        source: availableTags
       
    });


    var locations = [];
        //this is to call the modal popup when invalid postcode is inputted
         function alignModal() {
           var modalDialog = $("#resizemodal");
            /* Applying the top margin on modal dialog to align it vertically center */
            modalDialog.css("margin-top", Math.max(0, ($(window).height() - modalDialog.height()) / 3.5));


        }

    
    if (model.length < 20) {

        var model2 = @Html.Raw(Json.Encode(Model));
        
        locations = [];
        //for each postcode existing in the database, check if the postcode is valid and retreive the associated council
        for (var item in model2) {


            var point = {
                "latitude": model2[item].Latitude,
                "longitude": model2[item].Longitude,
                "description": model2[item].Name
            };
            // Push them all into an array.
            locations.push(point);

        }
        $('html, body').animate({ scrollTop: $(window).height() / 0.35 }, 'slow');
        showMap();

    }

    else
    {
        
         var model3 = @Html.Raw(Json.Encode(Model));
        
        locations = [];
        //for each postcode existing in the database, check if the postcode is valid and retreive the associated council
        for (var item in model3) {


            var point = {
                "latitude": model3[item].Latitude,
                "longitude": model3[item].Longitude,
                "description": model3[item].Name
            };
            // Push them all into an array.
            locations.push(point);

        }
        
        showMap();
    }



        //code to be executed when the 'search' button is clicked
    $("#search").click(function (e) {
        
        var suburb = $("#suburb").val();
        if (suburb == "") {
            var z = 0;
        }
        else {
        var Found = false;
         for (var item in array)
         {
             if (array[item] == suburb)
             {
                 Found = true;
                 break;

                     
             }
        }

        if (!Found)
        {
            e.preventDefault();
                 alignModal();
                 $("#exampleModalCenter").modal('show');
         }
       }
         
            //else {
            //    $('html, body').animate({ scrollTop: $(window).height() / 1.5 }, 'slow');
            //    showMap();

            //}

         });

    function showMap() {
        const TOKEN = "pk.eyJ1Ijoic2hyaWRoYXJwYXdhciIsImEiOiJjazAyMTQ4MHUwaG52M21wNDk4a29ncTF1In0.cHtu-I1h34aPZp70n4V6iA";

        var data = [];

        for (i = 0; i < locations.length; i++) {

            var feature = {
                "type": "Feature",
                "properties": {
                    "description": locations[i].description,
                    "icon": "town-hall-15",
                   
                    "marker-size": "large",

                },
                "geometry": {
                    "type": "Point",
                    "coordinates": [locations[i].longitude, locations[i].latitude]
                }
            };
            data.push(feature)
        }
        mapboxgl.accessToken = "pk.eyJ1Ijoic2hyaWRoYXJwYXdhciIsImEiOiJjazAyMTQ4MHUwaG52M21wNDk4a29ncTF1In0.cHtu-I1h34aPZp70n4V6iA";
        var map = new mapboxgl.Map({

            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v10',
            zoom: 11,
            center: [locations[0].longitude, locations[0].latitude]
        });
        map.on('load', function () {
            // Add a layer showing the places.

            map.addLayer({
                "id": "places",
                "type": "symbol",
                //"paint": {"symbol-radius":10},
                "source": {
                    "type": "geojson",
                    "data": {
                        "type": "FeatureCollection",
                        "features": data
                    }
                },
                "layout": {
                    "icon-image": "{icon}",
                    "icon-allow-overlap": true
                }
            });

            map.addControl(new mapboxgl.GeolocateControl({
                positionOptions: {
                    enableHighAccuracy: true
                },
                trackUserLocation: true
            }));
            map.addControl(new MapboxGeocoder({
                accessToken: mapboxgl.accessToken,
                marker: { color: 'orange' }, mapboxgl: mapboxgl
            }));;
            map.addControl(new mapboxgl.NavigationControl());
            // When a click event occurs on a feature in the places layer, open a popup at the
            // location of the feature, with description HTML from its properties.
            map.on('click', 'places', function (e) {
                var coordinates = e.features[0].geometry.coordinates.slice();
                var description = e.features[0].properties.description;
                // Ensure that if the map is zoomed out such that multiple
                // copies of the feature are visible, the popup appears
                // over the copy being pointed to.
                while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                    coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
                }
                new mapboxgl.Popup()
                    .setLngLat(coordinates)
                    .setHTML(description)
                    .addTo(map);
            });
            // Change the cursor to a pointer when the mouse is over the places layer.
            map.on('mouseenter', 'places', function () {
                map.getCanvas().style.cursor = 'pointer';
            });
            // Change it back to a pointer when it leaves.
            map.on('mouseleave', 'places', function () {
                map.getCanvas().style.cursor = '';
            });
        });
    }


           window.onscroll = function () { myFunction() };
        //this javascript is to make the progress bar at the top work according to the scrolling of the page
        function myFunction() {
            var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            var scrolled = (winScroll / height) * 100;
            document.getElementById("myBar").style.width = scrolled + "%";
        }
</script>

