@{
    var Rank = ViewBag.Rank;
}

    <head>


        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <style>

            .stats {
                height: 50%;
                background-position: center;
                background-repeat: no-repeat;
                background-size: cover;
                position: relative;
                width: 100%;
                background-color: azure;
            }

            text {
                font-family: "Verdana", sans-serif;
            }

            #chart {
                max-width: 600px;
            }

            #top3:hover {
                -webkit-box-shadow: -1px 9px 40px -12px rgba(0,0,0,0.75);
                -moz-box-shadow: -1px 9px 40px -12px rgba(0,0,0,0.75);
                box-shadow: -1px 9px 40px -12px rgba(0, 0, 0, 0.75);
            }

            .img-responsive {
                width: 100%;
                height: auto;
            }

            .last {
                border: 2px solid red;
            }

            .party-popper {
  position: absolute;
  top: 85%;
  left: 15%;
  height:auto;
}
.party-popper__emoji {
  position: absolute;
  top: 0;
  left: 0;
  font-size: 2em;
  -webkit-transform: translate(-50%) rotate(-30deg);
          transform: translate(-50%) rotate(-30deg);
  z-index: 1;
}
        </style>
    </head>

<body>
 
    <div class="stats" style="height:400px;margin-top:50px;margin-bottom:50px;">
        <div class="hero-text" style="    text-align: center;
        transform: translate(-50%, -20%);
        position: absolute;
        left: 50%;
        top: 20%;
    ">




            <h1 style="font-family:Calibri;color:indianred"><b>@ViewBag.Council <br /> Recycling Rate</b> </h1>
            <div id="chart" style="margin-top:30px;"></div>
            <h1 style="font-family:Calibri; margin-top:-40px;margin-bottom:10px;font-size:26px;"><b>#@Rank in 79 Councils</b></h1>
            <div id="party" style="display:none" class="party-popper">
                <div class="party-popper__emoji">🎉</div>
            </div>
            <script src='https://cdn.jsdelivr.net/mojs/latest/mo.min.js'></script>
            <script src='https://cdn.jsdelivr.net/mojs-player/latest/mojs-player.min.js'></script>

            <script src="~/Scripts/confetti.js"></script>
            @*javascript to show the gauge*@
            <script src="~/Scripts/gauge.js"></script>

            <script>
                function randNumberBounds() {
                    var Rate1 = '@ViewBag.Rate';

                    return parseInt(Rate1);
                }

                (function () {
                    var gauge = gaugeChart()
                        .width(260)
                        .height(250)
                        .innerRadius(50)
                        .outerRadius(80);

                    d3.select("#chart").datum([randNumberBounds()]).call(gauge);

                    function resize() {
                        var gWidth = Math.min(d3.select("#chart").node().offsetWidth, 400);
                        gauge.width(gWidth).innerRadius(gWidth / 4).outerRadius((gWidth / 4) + 40);
                        d3.select("#chart").call(gauge);
                    }

                    resize();
                    window.addEventListener("resize", resize);


                })()
            </script>
        </div>
    </div>

   
</body>

<script>
   $("._mojs-player_tes6w_4").hide();
    //javascript - when the button is clicked scroll down to the bottom of the page
    $(document).ready(function () {
        $('html, body').animate({ scrollTop: $(window).height() / 1.5 }, 'slow');
       
        if (@Rank== 1 || @Rank== 2 || @Rank== 3) {  $("#party").show();$("._mojs-player_tes6w_4").hide(); }
        $("._mojs-player_tes6w_4").hide();
         

    });
</script>
